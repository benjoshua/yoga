{% load staticfiles %}

<html>
<head>
<link rel="stylesheet" type="text/css" href="{% static "lessons/dist/css/bootstrap.css" %}">
</head>
<body class="container" ng-app="LessonsApp">
<div class="content" ng-controller="LessonsCtrl">
    <table class="table table-bordered">
        <thead>
        <th>
            Lesson Type
        </th>
        <th>
            Date
        </th>
        <th>
            Length
        </th>
        <th>
            Location
        </th>
        <th>
            Has room?
        </th>
        <th>

        </th>
        </thead>
        <tbody>
        <tr ng-repeat="l in lessons">
            <td>
                {[{ l.lessonType }]}
            </td>
            <td>
                {[{ l.date | date:'yyyy-MM-dd HH:mm:ss' }]}
            </td>
            <td>
                {[{ l.length }]}
            </td>
            <td>
                {[{ l.location }]}
            </td>
            <td>
                {[{ l.has_room }]}
            </td>
            <td>
                <a class="btn btn-primary" ng-show="l.students.indexOf({{ user.id }}) == -1" ng-click="signup(l.id)">Sign up</a>
                <a class="btn btn-primary" ng-show="l.students.indexOf({{ user.id }}) != -1" ng-click="remove(l.id)">Remove</a>
            </td>
        </tr>
        </tbody>
    </table>
</div>
<script src="{% static "angular/angular.js" %}"></script>
<script src="{% static "angular-resource/angular-resource.js" %}"></script>
<script src="{% static "lessons.js" %}"></script>
<script>
    var app = angular.module('LessonsApp');
    app.config(['$httpProvider', function($httpProvider) {
    $httpProvider.defaults.headers.common['X-CSRFToken'] = '{{ csrf_token|escapejs }}';
}]);
</script>
</body>
</html>